<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HealthSentinel - Water Quality Monitoring</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;900&display=swap" rel="stylesheet">
<style>
:root{--bg:#f7fbf8;--nav-start:#2b7a78;--nav-end:#023e8a;--accent:#ffb703;--card:#fff;--muted:#3a3a3a;--success:#2d6a4f;--danger:#d32f2f;--warning:#ff9800;--shadow:rgba(11,22,36,0.08);}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,Arial,sans-serif;background:var(--bg);color:var(--muted);line-height:1.35;scroll-behavior:smooth;}
nav{position:sticky;top:0;z-index:1200;display:flex;align-items:center;gap:20px;padding:12px 18px;background:linear-gradient(90deg,var(--nav-start),var(--nav-end));color:#fff;flex-wrap:wrap;box-shadow:0 3px 12px rgba(2,30,68,0.12);}
.nav-left{display:flex;gap:18px;align-items:center;}
.nav-left a{color:#fff;text-decoration:none;font-weight:700;font-family:'Montserrat',sans-serif;font-size:15px;padding:6px 8px;border-radius:6px;}
.nav-left a:hover{background: rgba(255,255,255,0.06);}
.tools{margin-left:auto;display:flex;gap:8px;align-items:center;}
.settings-btn{background: rgba(255,255,255,0.12);color:#fff;border:none;padding:8px 10px;border-radius:8px;font-weight:700;cursor:pointer;display:flex;align-items:center;gap:8px;}
.lang-dropdown{position:relative;display:inline-block;}
.lang-select{background: rgba(255,255,255,0.12);color:#fff;border:none;padding:8px 12px;border-radius:8px;font-weight:700;cursor:pointer;display:flex;align-items:center;gap:8px;min-width:120px;}
.lang-options{display:none;position:absolute;top:100%;right:0;background:#fff;border-radius:8px;box-shadow:0 8px 24px rgba(0,0,0,0.15);min-width:180px;z-index:1300;margin-top:4px;}
.lang-options.show{display:block;}
.lang-option{display:flex;align-items:center;gap:8px;padding:10px 12px;color:var(--muted);cursor:pointer;border-bottom:1px solid #f0f0f0;}
.lang-option:hover{background:#f8f9fa;}
main{max-width:1200px;margin:18px auto;padding:12px;}
.hero{background: linear-gradient(135deg,#e1f5fe 0%, #f3e5f5 100%);border-radius:14px;padding:28px;display:flex;gap:18px;align-items:center;box-shadow: 0 10px 30px var(--shadow);margin-bottom:18px;}
.hero .left{flex:1;}
.brand{font-family:'Montserrat',sans-serif;font-weight:900;color:var(--nav-end);font-size:32px;margin:0 0 6px 0;}
.subtitle{font-size:16px;color:var(--muted);margin:0 0 12px 0;}
.hero p{margin:0;color:#2f4858;font-weight:600;font-size:14.5px;}
.section-title{font-family:'Montserrat',sans-serif;font-weight:900;color:var(--nav-end);margin:8px 0 18px 0;font-size:20px;}
.sensors-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin:20px 0;}
.sensor-card{background:var(--card);border-radius:12px;padding:20px;box-shadow:0 8px 20px rgba(8,30,45,0.06);transition:transform 0.2s;}
.sensor-card:hover{transform:translateY(-2px);}
.sensor-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;}
.sensor-name{font-weight:700;color:var(--nav-end);font-size:18px;}
.sensor-status{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;}
.status-safe{background:#d4edda;color:#155724;}
.status-warning{background:#fff3cd;color:#856404;}
.status-danger{background:#f8d7da;color:#721c24;}
.status-offline{background:#e2e3e5;color:#495057;}
.sensor-location{color:#666;font-size:14px;margin-bottom:16px;}
.metrics-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:16px;}
.metric{text-align:center;padding:12px;background:#f8f9fa;border-radius:8px;}
.metric-value{font-size:20px;font-weight:700;margin-bottom:4px;}
.metric-label{font-size:12px;color:#666;}
.ph-safe{color:var(--success);}
.ph-warning{color:var(--warning);}
.ph-danger{color:var(--danger);}
.last-updated{font-size:12px;color:#888;text-align:center;}
.alert-panel{background:linear-gradient(135deg,#fff3cd,#f8d7da);border-radius:12px;padding:20px;margin-bottom:20px;border-left:5px solid var(--warning);}
.alert-title{font-weight:700;color:var(--danger);margin-bottom:8px;display:flex;align-items:center;gap:8px;}
.alert-desc{color:#856404;margin:0;}
.water-map{background:var(--card);border-radius:12px;padding:20px;box-shadow:0 8px 20px rgba(8,30,45,0.06);margin:20px 0;text-align:center;}
.map-placeholder{background:linear-gradient(135deg,#e3f2fd,#f3e5f5);height:300px;border-radius:8px;display:flex;align-items:center;justify-content:center;color:var(--muted);font-size:18px;}
.controls{display:flex;gap:12px;margin:20px 0;flex-wrap:wrap;}
.control-btn{padding:8px 16px;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all 0.3s;}
.control-btn.primary{background:var(--nav-end);color:#fff;}
.control-btn.secondary{background:#e9ecef;color:var(--muted);}
.control-btn:hover{opacity:0.8;}
.trends-chart{background:var(--card);border-radius:12px;padding:20px;box-shadow:0 8px 20px rgba(8,30,45,0.06);margin:20px 0;}
.chart-placeholder{height:200px;background:#f8f9fa;border-radius:8px;display:flex;align-items:center;justify-content:center;color:#666;}
@media (max-width:768px){.sensors-grid{grid-template-columns:1fr;}.controls{justify-content:center;}.hero{flex-direction:column;align-items:flex-start;}}
</style>
</head>
<body>

<nav>
  <div class="nav-left">
    <a href="index.html">ğŸ  Home</a>
    <a href="index.html#alerts">ğŸš¨ Alerts</a>
  </div>
  <div class="tools">
    <div class="lang-dropdown">
      <button class="lang-select" id="langSelect">
        <span class="lang-flag">ğŸ‡®ğŸ‡³</span>
        <span id="selectedLang">English</span>
        <span>â–¼</span>
      </button>
      <div class="lang-options" id="langOptions">
        <div class="lang-option" data-lang="en-IN"><span class="lang-flag">ğŸ‡®ğŸ‡³</span><span>English (India)</span></div>
        <div class="lang-option" data-lang="hi-IN"><span class="lang-flag">ğŸ‡®ğŸ‡³</span><span>à¤¹à¤¿à¤‚à¤¦à¥€ (Hindi)</span></div>
        <div class="lang-option" data-lang="ta-IN"><span class="lang-flag">ğŸ‡®ğŸ‡³</span><span>à®¤à®®à®¿à®´à¯ (Tamil)</span></div>
        <div class="lang-option" data-lang="as-IN"><span class="lang-flag">ğŸ‡®ğŸ‡³</span><span>à¦…à¦¸à¦®à§€à¦¯à¦¼à¦¾ (Assamese)</span></div>
        <div class="lang-option" data-lang="bn-IN"><span class="lang-flag">ğŸ‡®ğŸ‡³</span><span>à¦¬à¦¾à¦‚à¦²à¦¾ (Bengali)</span></div>
      </div>
    </div>
    <button class="settings-btn" id="settingsBtn">âš™ï¸ Settings</button>
  </div>
</nav>

<main>
  <section class="hero">
    <div class="left">
      <h1 class="brand" data-text="brand">HealthSentinel</h1>
      <p class="subtitle" data-text="wq_subtitle">Water Quality Monitoring</p>
      <p data-text="wq_hero_desc">Real-time monitoring of water sources using IoT sensors. Get instant alerts when water quality becomes unsafe.</p>
    </div>
    <div style="width:220px;text-align:center;">
      <div style="font-size:64px;margin-bottom:10px;">ğŸŒŠ</div>
      <div style="font-weight:700;color:var(--success)" data-text="wq_trust">Real-time â€¢ Accurate â€¢ Automated</div>
    </div>
  </section>

  <section>
    <!-- Alert Panel -->
    <div class="alert-panel" id="alertPanel" style="display:none;">
      <div class="alert-title">âš ï¸ <span data-text="wq_alert_title">Water Quality Alert</span></div>
      <p class="alert-desc" id="alertDescription" data-text="wq_alert_desc">High contamination detected in Village A well. Avoid drinking from this source.</p>
    </div>

    <div class="controls">
      <button class="control-btn primary" onclick="refreshData()" data-text="wq_refresh">ğŸ”„ Refresh Data</button>
      <button class="control-btn secondary" onclick="showHistory()" data-text="wq_history">ğŸ“Š View History</button>
      <button class="control-btn secondary" onclick="downloadReport()" data-text="wq_download">ğŸ“¥ Download Report</button>
    </div>

    <h2 class="section-title" data-text="wq_sensor_network">ğŸ” Sensor Network Status</h2>
    <div class="sensors-grid" id="sensorsGrid">
      <!-- Sensors will be populated by JavaScript -->
    </div>

    <!-- Water Sources Map -->
    <div class="water-map">
      <h2 class="section-title" data-text="wq_sources_map">ğŸ—ºï¸ Water Sources Map</h2>
      <div class="map-placeholder" data-text="wq_map_placeholder">
        ğŸ—ºï¸ Interactive map showing water sensor locations<br>
        (In production: Google Maps integration with sensor markers)
      </div>
    </div>

    <!-- Trends Chart -->
    <div class="trends-chart">
      <h2 class="section-title" data-text="wq_trends">ğŸ“ˆ Water Quality Trends</h2>
      <div class="chart-placeholder" data-text="wq_chart_placeholder">
        ğŸ“Š pH and TDS trends over the last 7 days<br>
        (In production: Chart.js integration)
      </div>
    </div>
  </section>
</main>

<script>
// Water Quality Monitoring System
let sensors = [];
let isSimulating = true;

// Language system
const texts = {
  "en-IN": {
    brand: "HealthSentinel",
    wq_subtitle: "Water Quality Monitoring",
    wq_hero_desc: "Real-time monitoring of water sources using IoT sensors. Get instant alerts when water quality becomes unsafe.",
    wq_trust: "Real-time â€¢ Accurate â€¢ Automated",
    wq_alert_title: "Water Quality Alert",
    wq_alert_desc: "High contamination detected in Village A well. Avoid drinking from this source.",
    wq_refresh: "ğŸ”„ Refresh Data",
    wq_history: "ğŸ“Š View History",
    wq_download: "ğŸ“¥ Download Report",
    wq_sensor_network: "ğŸ” Sensor Network Status",
    wq_sources_map: "ğŸ—ºï¸ Water Sources Map",
    wq_map_placeholder: "ğŸ—ºï¸ Interactive map showing water sensor locations\\n(In production: Google Maps integration with sensor markers)",
    wq_trends: "ğŸ“ˆ Water Quality Trends",
    wq_chart_placeholder: "ğŸ“Š pH and TDS trends over the last 7 days\\n(In production: Chart.js integration)",
    wq_ph: "pH Level",
    wq_tds: "TDS (ppm)",
    wq_turbidity: "Turbidity",
    wq_bacteria: "Bacteria Count",
    wq_last_updated: "Last updated",
    wq_safe: "Safe",
    wq_warning: "Warning",
    wq_danger: "Danger",
    wq_offline: "Offline"
  },
  "hi-IN": {
    brand: "à¤¹à¥‡à¤²à¥à¤¥à¤¸à¥‡à¤‚à¤Ÿà¤¿à¤¨à¤²",
    wq_subtitle: "à¤œà¤² à¤—à¥à¤£à¤µà¤¤à¥à¤¤à¤¾ à¤¨à¤¿à¤—à¤°à¤¾à¤¨à¥€",
    wq_hero_desc: "IoT à¤¸à¥‡à¤‚à¤¸à¤° à¤•à¤¾ à¤‰à¤ªà¤¯à¥‹à¤— à¤•à¤°à¤•à¥‡ à¤œà¤² à¤¸à¥à¤°à¥‹à¤¤à¥‹à¤‚ à¤•à¥€ à¤µà¤¾à¤¸à¥à¤¤à¤µà¤¿à¤• à¤¸à¤®à¤¯ à¤¨à¤¿à¤—à¤°à¤¾à¤¨à¥€à¥¤ à¤œà¤¬ à¤ªà¤¾à¤¨à¥€ à¤•à¥€ à¤—à¥à¤£à¤µà¤¤à¥à¤¤à¤¾ à¤…à¤¸à¥à¤°à¤•à¥à¤·à¤¿à¤¤ à¤¹à¥‹ à¤œà¤¾à¤ à¤¤à¥‹ à¤¤à¥à¤°à¤‚à¤¤ à¤…à¤²à¤°à¥à¤Ÿ à¤ªà¥à¤°à¤¾à¤ªà¥à¤¤ à¤•à¤°à¥‡à¤‚à¥¤",
    wq_trust: "à¤µà¤¾à¤¸à¥à¤¤à¤µà¤¿à¤• à¤¸à¤®à¤¯ â€¢ à¤¸à¤Ÿà¥€à¤• â€¢ à¤¸à¥à¤µà¤šà¤¾à¤²à¤¿à¤¤",
    wq_alert_title: "à¤œà¤² à¤—à¥à¤£à¤µà¤¤à¥à¤¤à¤¾ à¤šà¥‡à¤¤à¤¾à¤µà¤¨à¥€",
    wq_alert_desc: "à¤—à¤¾à¤‚à¤µ à¤ à¤•à¥‡ à¤•à¥à¤à¤‚ à¤®à¥‡à¤‚ à¤‰à¤šà¥à¤š à¤¸à¤‚à¤¦à¥‚à¤·à¤£ à¤•à¤¾ à¤ªà¤¤à¤¾ à¤šà¤²à¤¾ à¤¹à¥ˆà¥¤ à¤‡à¤¸ à¤¸à¥à¤°à¥‹à¤¤ à¤¸à¥‡ à¤ªà¤¾à¤¨à¥€ à¤ªà¥€à¤¨à¥‡ à¤¸à¥‡ à¤¬à¤šà¥‡à¤‚à¥¤",
    wq_refresh: "ğŸ”„ à¤¡à¥‡à¤Ÿà¤¾ à¤°à¤¿à¤«à¥à¤°à¥‡à¤¶ à¤•à¤°à¥‡à¤‚",
    wq_history: "ğŸ“Š à¤‡à¤¤à¤¿à¤¹à¤¾à¤¸ à¤¦à¥‡à¤–à¥‡à¤‚",
    wq_download: "ğŸ“¥ à¤°à¤¿à¤ªà¥‹à¤°à¥à¤Ÿ à¤¡à¤¾à¤‰à¤¨à¤²à¥‹à¤¡ à¤•à¤°à¥‡à¤‚",
    wq_sensor_network: "ğŸ” à¤¸à¥‡à¤‚à¤¸à¤° à¤¨à¥‡à¤Ÿà¤µà¤°à¥à¤• à¤¸à¥à¤¥à¤¿à¤¤à¤¿",
    wq_sources_map: "ğŸ—ºï¸ à¤œà¤² à¤¸à¥à¤°à¥‹à¤¤ à¤®à¤¾à¤¨à¤šà¤¿à¤¤à¥à¤°",
    wq_map_placeholder: "ğŸ—ºï¸ à¤œà¤² à¤¸à¥‡à¤‚à¤¸à¤° à¤¸à¥à¤¥à¤¾à¤¨à¥‹à¤‚ à¤•à¥‹ à¤¦à¤¿à¤–à¤¾à¤¨à¥‡ à¤µà¤¾à¤²à¤¾ à¤‡à¤‚à¤Ÿà¤°à¥ˆà¤•à¥à¤Ÿà¤¿à¤µ à¤®à¤¾à¤¨à¤šà¤¿à¤¤à¥à¤°\\n(à¤‰à¤¤à¥à¤ªà¤¾à¤¦à¤¨ à¤®à¥‡à¤‚: à¤¸à¥‡à¤‚à¤¸à¤° à¤®à¤¾à¤°à¥à¤•à¤° à¤•à¥‡ à¤¸à¤¾à¤¥ Google à¤®à¤¾à¤¨à¤šà¤¿à¤¤à¥à¤° à¤à¤•à¥€à¤•à¤°à¤£)",
    wq_trends: "ğŸ“ˆ à¤œà¤² à¤—à¥à¤£à¤µà¤¤à¥à¤¤à¤¾ à¤°à¥à¤à¤¾à¤¨",
    wq_chart_placeholder: "ğŸ“Š à¤ªà¤¿à¤›à¤²à¥‡ 7 à¤¦à¤¿à¤¨à¥‹à¤‚ à¤®à¥‡à¤‚ pH à¤”à¤° TDS à¤°à¥à¤à¤¾à¤¨\\n(à¤‰à¤¤à¥à¤ªà¤¾à¤¦à¤¨ à¤®à¥‡à¤‚: Chart.js à¤à¤•à¥€à¤•à¤°à¤£)",
    wq_ph: "pH à¤¸à¥à¤¤à¤°",
    wq_tds: "TDS (ppm)",
    wq_turbidity: "à¤Ÿà¤°à¥à¤¬à¤¿à¤¡à¤¿à¤Ÿà¥€",
    wq_bacteria: "à¤¬à¥ˆà¤•à¥à¤Ÿà¥€à¤°à¤¿à¤¯à¤¾ à¤¸à¤‚à¤–à¥à¤¯à¤¾",
    wq_last_updated: "à¤…à¤‚à¤¤à¤¿à¤® à¤…à¤ªà¤¡à¥‡à¤Ÿ",
    wq_safe: "à¤¸à¥à¤°à¤•à¥à¤·à¤¿à¤¤",
    wq_warning: "à¤šà¥‡à¤¤à¤¾à¤µà¤¨à¥€",
    wq_danger: "à¤–à¤¤à¤°à¤¾",
    wq_offline: "à¤‘à¤«à¤²à¤¾à¤‡à¤¨"
  },
  "ta-IN": {
    brand: "à®¹à¯†à®²à¯à®¤à¯à®šà¯†à®£à¯à®Ÿà®¿à®¨à®²à¯",
    wq_subtitle: "à®¨à¯€à®°à¯ à®¤à®° à®•à®£à¯à®•à®¾à®£à®¿à®ªà¯à®ªà¯",
    wq_hero_desc: "IoT à®šà¯†à®©à¯à®šà®°à¯à®•à®³à¯ˆ à®ªà®¯à®©à¯à®ªà®Ÿà¯à®¤à¯à®¤à®¿ à®¨à¯€à®°à¯ à®®à¯‚à®²à®™à¯à®•à®³à®¿à®©à¯ à®‰à®Ÿà®©à®Ÿà®¿ à®•à®¾à®² à®•à®£à¯à®•à®¾à®£à®¿à®ªà¯à®ªà¯. à®¨à¯€à®°à®¿à®©à¯ à®¤à®°à®®à¯ à®ªà®¾à®¤à¯à®•à®¾à®ªà¯à®ªà®±à¯à®±à®¤à®¾à®• à®†à®•à¯à®®à¯à®ªà¯‹à®¤à¯ à®¤à®±à¯à®•à®¾à®² à®à®šà¯à®šà®°à®¿à®•à¯à®•à¯ˆà®•à®³à¯ˆ à®ªà¯†à®±à®µà¯à®®à¯.",
    wq_trust: "à®‰à®Ÿà®©à®Ÿà®¿ à®•à®¾à®²à®®à¯ â€¢ à®¤à¯€à®°à¯à®®à®¾à®©à®®à®¾à®© â€¢ à®¤à®¾à®©à®¿à®¯à®™à¯à®•à®¿",
    wq_alert_title: "à®¨à¯€à®°à¯ à®¤à®° à®à®šà¯à®šà®°à®¿à®•à¯à®•à¯ˆ",
    wq_alert_desc: "à®•à®¿à®°à®¾à®®à®®à¯ à®… à®•à®¿à®£à®±à¯à®±à®¿à®²à¯ à®…à®¤à®¿à®• à®®à®²à®¿à®¨à¯€à®•à®°à®£à®®à¯ à®•à®£à¯à®Ÿà®±à®¿à®¯à®ªà¯à®ªà®Ÿà¯à®Ÿà¯. à®‡à®¨à¯à®¤ à®®à¯‚à®²à®¤à¯à®¤à®¿à®²à®¿à®°à¯à®¨à¯à®¤à¯ à®¨à¯€à®°à¯ à®•à¯à®Ÿà®¿à®ªà¯à®ªà®¤à¯ˆ à®¤à®µà®¿à®°à¯à®•à¯à®•à®µà¯à®®à¯.",
    wq_refresh: "ğŸ”„ à®¤à®°à®µà¯ˆ à®ªà¯à®¤à¯à®ªà¯à®ªà®¿à®•à¯à®•à®µà¯à®®à¯",
    wq_history: "ğŸ“Š à®µà®°à®²à®¾à®±à¯ à®ªà®¾à®°à¯à®•à¯à®•à®µà¯à®®à¯",
    wq_download: "ğŸ“¥ à®…à®±à®¿à®•à¯à®•à¯ˆ à®ªà®¤à®¿à®µà®¿à®±à®•à¯à®•à®µà¯à®®à¯",
    wq_sensor_network: "ğŸ” à®šà¯†à®©à¯à®šà®°à¯ à®¨à¯†à®Ÿà¯à®µà®°à¯à®•à¯ à®¨à®¿à®²à¯ˆ",
    wq_sources_map: "ğŸ—ºï¸ à®¨à¯€à®°à¯ à®®à¯‚à®²à®™à¯à®•à®³à¯ à®µà®•à¯ˆà®ªà¯à®ªà®¾à®Ÿà¯",
    wq_map_placeholder: "ğŸ—ºï¸ à®¨à¯€à®°à¯ à®šà¯†à®©à¯à®šà®°à¯ à®‡à®Ÿà®™à¯à®•à®³à¯ˆ à®•à®¾à®Ÿà¯à®Ÿà¯à®®à¯ à®‡à®£à¯ˆà®¯à®¾à®• à®µà®•à¯ˆà®ªà¯à®ªà®¾à®Ÿà¯\\n(à®‰à®±à¯à®ªà®¤à¯à®¤à®¿à®¯à®¿à®²à¯: à®šà¯†à®©à¯à®šà®°à¯ à®•à¯à®±à®¿à®•à®³à¯à®Ÿà®©à¯ Google à®µà®•à¯ˆà®ªà¯à®ªà®¾à®Ÿà¯ à®‡à®£à¯ˆà®ªà¯à®ªà¯)",
    wq_trends: "ğŸ“ˆ à®¨à¯€à®°à¯ à®¤à®° à®šà¯†à®¯à®²à¯à®ªà®¾à®Ÿà¯ à®µà®´à®¿à®®à¯à®±à¯ˆà®•à®³à¯",
    wq_chart_placeholder: "ğŸ“Š à®•à®Ÿà®¨à¯à®¤ 7 à®¨à®¾à®Ÿà¯à®•à®³à®¿à®²à¯ pH à®®à®±à¯à®±à¯à®®à¯ TDS à®µà®´à®¿à®®à¯à®±à¯ˆà®•à®³à¯\\n(à®‰à®±à¯à®ªà®¤à¯à®¤à®¿à®¯à®¿à®²à¯: Chart.js à®‡à®£à¯ˆà®ªà¯à®ªà¯)",
    wq_ph: "pH à®¨à®¿à®²à¯ˆ",
    wq_tds: "TDS (ppm)",
    wq_turbidity: "à®®à¯‚à®•à¯à®•à®¤à¯à®¤à®©à¯à®®à¯ˆ",
    wq_bacteria: "à®ªà¯‡à®•à¯à®Ÿà¯€à®°à®¿à®¯à®¾ à®à®£à¯à®£à®¿à®•à¯à®•à¯ˆ",
    wq_last_updated: "à®…à®£à¯à®®à¯ˆà®¯à®¾à®• à®ªà¯à®¤à¯à®ªà¯à®ªà®¿à®•à¯à®•à®ªà¯à®ªà®Ÿà¯à®Ÿà®¤à¯",
    wq_safe: "à®ªà®¾à®¤à¯à®•à®¾à®ªà¯à®ªà®¾à®©",
    wq_warning: "à®à®šà¯à®šà®°à®¿à®•à¯à®•à¯ˆ",
    wq_danger: "à®†à®ªà®¤à¯à®¤à¯",
    wq_offline: "à®†à®ƒà®ªà¯à®²à¯ˆà®©à¯"
  },
  "as-IN": {
    brand: "à¦¹à§‡à¦²à§à¦¥à¦¸à§‡à¦£à§à¦Ÿà¦¿à¦¨à§‡à¦²",
    wq_subtitle: "à¦ªà¦¾à¦¨à§€à§° à¦—à§à¦£à¦¾à¦—à§à¦£ à¦¨à¦¿à§°à§€à¦•à§à¦·à¦£",
    wq_hero_desc: "IoT à¦šà§‡à¦¨à§à¦¸à§° à¦¬à§à¦¯à§±à¦¹à¦¾à§° à¦•à§°à¦¿ à¦ªà¦¾à¦¨à§€à§° à¦‰à§à¦¸à¦¸à¦®à§‚à¦¹à§° à§°à¦¿à¦¯à¦¼à§‡à¦²-à¦Ÿà¦¾à¦‡à¦® à¦¨à¦¿à§°à§€à¦•à§à¦·à¦£à¥¤ à¦ªà¦¾à¦¨à§€à§° à¦—à§à¦£à¦¾à¦—à§à¦£ à¦¬à¦¿à¦ªà¦œà§à¦œà¦¨à¦• à¦¹à§ˆ à¦‰à¦ à¦¿à¦²à§‡ à¦¤à§à¦•à§à¦·à¦£à¦¾à§ à¦¸à¦¤à§°à§à¦•à¦¬à¦¾à¦£à§€ à¦ªà¦¾à¦“à¦•à¥¤",
    wq_trust: "à§°à¦¿à¦¯à¦¼à§‡à¦²-à¦Ÿà¦¾à¦‡à¦® â€¢ à¦¸à¦ à¦¿à¦• â€¢ à¦¸à§à¦¬à¦šà¦¾à¦²à¦¿à¦¤",
    wq_alert_title: "à¦ªà¦¾à¦¨à§€à§° à¦—à§à¦£à¦¾à¦—à§à¦£ à¦¸à¦¤à§°à§à¦•à¦¬à¦¾à¦£à§€",
    wq_alert_desc: "à¦—à¦¾à¦à¦“ à¦à§° à¦•à§à¦à§±à¦¾à¦¤ à¦‰à¦šà§à¦š à¦¦à§‚à¦·à¦£ à¦§à§°à¦¾ à¦ªà§°à¦¿à¦›à§‡à¥¤ à¦à¦‡ à¦‰à§à¦¸à§° à¦ªà§°à¦¾ à¦ªà¦¾à¦¨à§€ à¦–à§‹à§±à¦¾ à¦¨à¦•à§°à¦¿à¦¬à¥¤",
    wq_refresh: "ğŸ”„ à¦¡à§‡à¦Ÿà¦¾ à¦¸à¦¤à§‡à¦œ à¦•à§°à¦•",
    wq_history: "ğŸ“Š à¦‡à¦¤à¦¿à¦¹à¦¾à¦¸ à¦šà¦¾à¦“à¦•",
    wq_download: "ğŸ“¥ à¦ªà§à§°à¦¤à¦¿à¦¬à§‡à¦¦à¦¨ à¦¡à¦¾à¦‰à¦¨à¦²à§‹à¦¡ à¦•à§°à¦•",
    wq_sensor_network: "ğŸ” à¦šà§‡à¦¨à§à¦¸à§° à¦¨à§‡à¦Ÿà§±à§°à§à¦• à¦¸à§à¦¥à¦¿à¦¤à¦¿",
    wq_sources_map: "ğŸ—ºï¸ à¦ªà¦¾à¦¨à§€à§° à¦‰à§à¦¸ à¦®à¦¾à¦¨à¦šà¦¿à¦¤à§à§°",
    wq_map_placeholder: "ğŸ—ºï¸ à¦ªà¦¾à¦¨à§€ à¦šà§‡à¦¨à§à¦¸à§°à§° à¦¸à§à¦¥à¦¾à¦¨ à¦¦à§‡à¦–à§à§±à¦¾ à¦‡à¦¨à§à¦Ÿà¦¾à§°à¦…à§à¦¯à¦¾à¦•à§à¦Ÿà¦¿à¦­ à¦®à¦¾à¦¨à¦šà¦¿à¦¤à§à§°\\n(à¦‰à§à¦ªà¦¾à¦¦à¦¨à¦¤: à¦šà§‡à¦¨à§à¦¸à§° à¦®à¦¾à§°à§à¦•à¦¾à§°à§° à¦¸à§ˆà¦¤à§‡ Google à¦®à¦¾à¦¨à¦šà¦¿à¦¤à§à§° à¦à¦•à§€à¦•à§°à¦£)",
    wq_trends: "ğŸ“ˆ à¦ªà¦¾à¦¨à§€à§° à¦—à§à¦£à¦¾à¦—à§à¦£ à¦§à¦¾à§°à¦¾",
    wq_chart_placeholder: "ğŸ“Š à¦¯à§‹à§±à¦¾ 7 à¦¦à¦¿à¦¨à¦¤ pH à¦†à§°à§ TDS à¦§à¦¾à§°à¦¾\\n(à¦‰à§à¦ªà¦¾à¦¦à¦¨à¦¤: Chart.js à¦à¦•à§€à¦•à§°à¦£)",
    wq_ph: "pH à¦¸à§à¦¤à§°",
    wq_tds: "TDS (ppm)",
    wq_turbidity: "à¦Ÿà¦¾à§°à§à¦¬à¦¿à¦¡à¦¿à¦Ÿà¦¿",
    wq_bacteria: "à¦¬à§à¦¯à¦¾à¦•à§à¦Ÿà§‡à§°à¦¿à¦¯à¦¼à¦¾à§° à¦¸à¦‚à¦–à§à¦¯à¦¾",
    wq_last_updated: "à¦¶à§‡à¦· à¦†à¦ªà¦¡à§‡à¦Ÿ",
    wq_safe: "à¦¸à§à§°à¦•à§à¦·à¦¿à¦¤",
    wq_warning: "à¦¸à¦¤à§°à§à¦•à¦¬à¦¾à¦£à§€",
    wq_danger: "à¦¬à¦¿à¦ªà¦¦",
    wq_offline: "à¦…à¦«à¦²à¦¾à¦‡à¦¨"
  },
  "bn-IN": {
    brand: "à¦¹à§‡à¦²à§à¦¥à¦¸à§‡à¦¨à§à¦Ÿà¦¿à¦¨à§‡à¦²",
    wq_subtitle: "à¦œà¦² à¦—à§à¦£à¦®à¦¾à¦¨ à¦®à¦¨à¦¿à¦Ÿà¦°à¦¿à¦‚",
    wq_hero_desc: "IoT à¦¸à§‡à¦¨à§à¦¸à¦° à¦¬à§à¦¯à¦¬à¦¹à¦¾à¦° à¦•à¦°à§‡ à¦œà¦²à§‡à¦° à¦‰à§à¦¸à¦—à§à¦²à¦¿à¦° à¦°à¦¿à¦¯à¦¼à§‡à¦²-à¦Ÿà¦¾à¦‡à¦® à¦®à¦¨à¦¿à¦Ÿà¦°à¦¿à¦‚à¥¤ à¦œà¦²à§‡à¦° à¦—à§à¦£à¦®à¦¾à¦¨ à¦…à¦¨à¦¿à¦°à¦¾à¦ªà¦¦ à¦¹à¦¯à¦¼à§‡ à¦‰à¦ à¦²à§‡ à¦¤à¦¾à§à¦•à§à¦·à¦£à¦¿à¦• à¦¸à¦¤à¦°à§à¦•à¦¤à¦¾ à¦ªà¦¾à¦¨à¥¤",
    wq_trust: "à¦°à¦¿à¦¯à¦¼à§‡à¦²-à¦Ÿà¦¾à¦‡à¦® â€¢ à¦¨à¦¿à¦°à§à¦­à§à¦² â€¢ à¦¸à§à¦¬à¦¯à¦¼à¦‚à¦•à§à¦°à¦¿à¦¯à¦¼",
    wq_alert_title: "à¦œà¦² à¦—à§à¦£à¦®à¦¾à¦¨ à¦¸à¦¤à¦°à§à¦•à¦¤à¦¾",
    wq_alert_desc: "à¦—à§à¦°à¦¾à¦® à¦-à¦à¦° à¦•à§à¦¯à¦¼à§‹à¦¤à§‡ à¦‰à¦šà§à¦š à¦¦à§‚à¦·à¦£ à¦¶à¦¨à¦¾à¦•à§à¦¤ à¦¹à¦¯à¦¼à§‡à¦›à§‡à¥¤ à¦à¦‡ à¦‰à§à¦¸ à¦¥à§‡à¦•à§‡ à¦œà¦² à¦ªà¦¾à¦¨ à¦à¦¡à¦¼à¦¿à¦¯à¦¼à§‡ à¦šà¦²à§à¦¨à¥¤",
    wq_refresh: "ğŸ”„ à¦¡à§‡à¦Ÿà¦¾ à¦°à¦¿à¦«à§à¦°à§‡à¦¶ à¦•à¦°à§à¦¨",
    wq_history: "ğŸ“Š à¦‡à¦¤à¦¿à¦¹à¦¾à¦¸ à¦¦à§‡à¦–à§à¦¨",
    wq_download: "ğŸ“¥ à¦°à¦¿à¦ªà§‹à¦°à§à¦Ÿ à¦¡à¦¾à¦‰à¦¨à¦²à§‹à¦¡ à¦•à¦°à§à¦¨",
    wq_sensor_network: "ğŸ” à¦¸à§‡à¦¨à§à¦¸à¦° à¦¨à§‡à¦Ÿà¦“à¦¯à¦¼à¦¾à¦°à§à¦• à¦¸à§à¦¥à¦¿à¦¤à¦¿",
    wq_sources_map: "ğŸ—ºï¸ à¦œà¦²à§‡à¦° à¦‰à§à¦¸ à¦®à¦¾à¦¨à¦šà¦¿à¦¤à§à¦°",
    wq_map_placeholder: "ğŸ—ºï¸ à¦œà¦² à¦¸à§‡à¦¨à§à¦¸à¦°à§‡à¦° à¦…à¦¬à¦¸à§à¦¥à¦¾à¦¨ à¦¦à§‡à¦–à¦¾à¦¨à§‹ à¦‡à¦¨à§à¦Ÿà¦¾à¦°à¦…à§à¦¯à¦¾à¦•à§à¦Ÿà¦¿à¦­ à¦®à¦¾à¦¨à¦šà¦¿à¦¤à§à¦°\\n(à¦‰à§à¦ªà¦¾à¦¦à¦¨à§‡: à¦¸à§‡à¦¨à§à¦¸à¦° à¦®à¦¾à¦°à§à¦•à¦¾à¦° à¦¸à¦¹ Google à¦®à¦¾à¦¨à¦šà¦¿à¦¤à§à¦° à¦‡à¦¨à§à¦Ÿà¦¿à¦—à§à¦°à§‡à¦¶à¦¨)",
    wq_trends: "ğŸ“ˆ à¦œà¦² à¦—à§à¦£à¦®à¦¾à¦¨à§‡à¦° à¦ªà§à¦°à¦¬à¦£à¦¤à¦¾",
    wq_chart_placeholder: "ğŸ“Š à¦—à¦¤ 7 à¦¦à¦¿à¦¨à§‡à¦° pH à¦à¦¬à¦‚ TDS à¦ªà§à¦°à¦¬à¦£à¦¤à¦¾\\n(à¦‰à§à¦ªà¦¾à¦¦à¦¨à§‡: Chart.js à¦‡à¦¨à§à¦Ÿà¦¿à¦—à§à¦°à§‡à¦¶à¦¨)",
    wq_ph: "pH à¦¸à§à¦¤à¦°",
    wq_tds: "TDS (ppm)",
    wq_turbidity: "à¦Ÿà¦¾à¦°à§à¦¬à¦¿à¦¡à¦¿à¦Ÿà¦¿",
    wq_bacteria: "à¦¬à§à¦¯à¦¾à¦•à¦Ÿà§‡à¦°à¦¿à¦¯à¦¼à¦¾à¦° à¦¸à¦‚à¦–à§à¦¯à¦¾",
    wq_last_updated: "à¦¸à¦°à§à¦¬à¦¶à§‡à¦· à¦†à¦ªà¦¡à§‡à¦Ÿ",
    wq_safe: "à¦¨à¦¿à¦°à¦¾à¦ªà¦¦",
    wq_warning: "à¦¸à¦¤à¦°à§à¦•à¦¤à¦¾",
    wq_danger: "à¦¬à¦¿à¦ªà¦¦",
    wq_offline: "à¦…à¦«à¦²à¦¾à¦‡à¦¨"
  }
};

function updateLanguage(lang) {
  document.querySelectorAll('[data-text]').forEach(element => {
    const textKey = element.getAttribute('data-text');
    if (texts[lang] && texts[lang][textKey]) {
      element.textContent = texts[lang][textKey];
    }
  });
  const langNames = {'en-IN': 'English', 'hi-IN': 'à¤¹à¤¿à¤‚à¤¦à¥€', 'ta-IN': 'à®¤à®®à®¿à®´à¯', 'as-IN': 'à¦…à¦¸à¦®à§€à¦¯à¦¼à¦¾', 'bn-IN': 'à¦¬à¦¾à¦‚à¦²à¦¾'};
  document.getElementById('selectedLang').textContent = langNames[lang];
  localStorage.setItem('selectedLang', lang);
}

// Sensor data simulation
function generateSensorData() {
  const locations = ['Village A Well', 'Village B Pond', 'Community Tank', 'River Source', 'Tube Well #1', 'Tube Well #2'];
  
  sensors = locations.map((location, index) => {
    const ph = parseFloat((Math.random() * 4 + 5.5).toFixed(1)); // 5.5-9.5
    const tds = Math.floor(Math.random() * 800 + 50); // 50-850
    const turbidity = parseFloat((Math.random() * 10).toFixed(1)); // 0-10
    const bacteria = Math.floor(Math.random() * 150); // 0-150
    const isOnline = Math.random() > 0.1; // 90% online
    
    let status = 'safe';
    if (!isOnline) {
      status = 'offline';
    } else if (ph < 6.5 || ph > 8.5 || tds > 500 || bacteria > 50 || turbidity > 5) {
      status = 'danger';
    } else if (ph < 7 || ph > 8.2 || tds > 300 || bacteria > 20 || turbidity > 2) {
      status = 'warning';
    }
    
    return {
      id: `WS${String(index + 1).padStart(3, '0')}`,
      location: location,
      ph: ph,
      tds: tds,
      turbidity: turbidity,
      bacteria: bacteria,
      status: status,
      isOnline: isOnline,
      lastUpdated: new Date(Date.now() - Math.random() * 1800000) // Random time within last 30 min
    };
  });
}

function renderSensors() {
  const grid = document.getElementById('sensorsGrid');
  const currentLang = localStorage.getItem('selectedLang') || 'en-IN';
  
  grid.innerHTML = sensors.map(sensor => `
    <div class="sensor-card">
      <div class="sensor-header">
        <div class="sensor-name">${sensor.id} - ${sensor.location}</div>
        <div class="sensor-status status-${sensor.status}">${texts[currentLang][`wq_${sensor.status}`] || sensor.status}</div>
      </div>
      <div class="sensor-location">ğŸ“ ${sensor.location}</div>
      
      <div class="metrics-grid">
        <div class="metric">
          <div class="metric-value ph-${sensor.ph < 6.5 || sensor.ph > 8.5 ? 'danger' : sensor.ph < 7 || sensor.ph > 8.2 ? 'warning' : 'safe'}">${sensor.isOnline ? sensor.ph : '--'}</div>
          <div class="metric-label">${texts[currentLang]['wq_ph'] || 'pH Level'}</div>
        </div>
        <div class="metric">
          <div class="metric-value ph-${sensor.tds > 500 ? 'danger' : sensor.tds > 300 ? 'warning' : 'safe'}">${sensor.isOnline ? sensor.tds : '--'}</div>
          <div class="metric-label">${texts[currentLang]['wq_tds'] || 'TDS (ppm)'}</div>
        </div>
        <div class="metric">
          <div class="metric-value ph-${sensor.turbidity > 5 ? 'danger' : sensor.turbidity > 2 ? 'warning' : 'safe'}">${sensor.isOnline ? sensor.turbidity : '--'}</div>
          <div class="metric-label">${texts[currentLang]['wq_turbidity'] || 'Turbidity'}</div>
        </div>
        <div class="metric">
          <div class="metric-value ph-${sensor.bacteria > 50 ? 'danger' : sensor.bacteria > 20 ? 'warning' : 'safe'}">${sensor.isOnline ? sensor.bacteria : '--'}</div>
          <div class="metric-label">${texts[currentLang]['wq_bacteria'] || 'Bacteria Count'}</div>
        </div>
      </div>
      
      <div class="last-updated">${texts[currentLang]['wq_last_updated'] || 'Last updated'}: ${sensor.isOnline ? sensor.lastUpdated.toLocaleTimeString() : 'N/A'}</div>
    </div>
  `).join('');
  
  // Show alert if any sensor is in danger
  const dangerSensors = sensors.filter(s => s.status === 'danger');
  if (dangerSensors.length > 0) {
    document.getElementById('alertPanel').style.display = 'block';
    document.getElementById('alertDescription').textContent = 
      `High contamination detected in ${dangerSensors[0].location}. Avoid drinking from this source.`;
  } else {
    document.getElementById('alertPanel').style.display = 'none';
  }
}

function refreshData() {
  if (isSimulating) {
    generateSensorData();
    renderSensors();
    showNotification('Data refreshed successfully! ğŸ“Š');
  } else {
    // In production: fetch real sensor data from API
    fetch('/api/water-quality/')
      .then(response => response.json())
      .then(data => {
        sensors = data.sensors;
        renderSensors();
      })
      .catch(error => {
        console.error('Error fetching sensor data:', error);
        showNotification('Error refreshing data. Please try again. âŒ');
      });
  }
}

function showHistory() {
  alert('ğŸ“Š Historical data viewer would open here.\\n\\nFeatures:\\n- 7-day trends\\n- Monthly reports\\n- Contamination events\\n- Seasonal patterns');
}

function downloadReport() {
  // Simulate report generation
  const reportData = {
    timestamp: new Date().toISOString(),
    sensors: sensors.map(s => ({
      id: s.id,
      location: s.location,
      status: s.status,
      ph: s.ph,
      tds: s.tds,
      turbidity: s.turbidity,
      bacteria: s.bacteria
    }))
  };
  
  const blob = new Blob([JSON.stringify(reportData, null, 2)], {type: 'application/json'});
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `water-quality-report-${new Date().toISOString().split('T')[0]}.json`;
  a.click();
  URL.revokeObjectURL(url);
  
  showNotification('Report downloaded successfully! ğŸ“¥');
}

function showNotification(message) {
  // Simple notification system
  const notification = document.createElement('div');
  notification.style.cssText = `
    position: fixed;
    top: 20px;
    right: 20px;
    background: var(--success);
    color: white;
    padding: 12px 20px;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    z-index: 2000;
    font-weight: 600;
  `;
  notification.textContent = message;
  document.body.appendChild(notification);
  
  setTimeout(() => {
    notification.remove();
  }, 3000);
}

// Initialize page
document.addEventListener('DOMContentLoaded', function() {
  const savedLang = localStorage.getItem('selectedLang') || 'en-IN';
  updateLanguage(savedLang);
  
  // Language dropdown
  const langSelect = document.getElementById('langSelect');
  const langOptions = document.getElementById('langOptions');
  
  langSelect.addEventListener('click', function(e) {
    e.stopPropagation();
    langOptions.classList.toggle('show');
  });
  
  document.addEventListener('click', function() {
    langOptions.classList.remove('show');
  });
  
  document.querySelectorAll('.lang-option').forEach(option => {
    option.addEventListener('click', function() {
      const selectedLang = this.dataset.lang;
      updateLanguage(selectedLang);
      langOptions.classList.remove('show');
      renderSensors(); // Re-render with new language
    });
  });
  
  // Settings button
  document.getElementById('settingsBtn').addEventListener('click', function() {
    alert('Settings panel would open here');
  });
  
  // Initial data load
  generateSensorData();
  renderSensors();
  
  // Auto-refresh every 30 seconds
  setInterval(() => {
    if (isSimulating) {
      refreshData();
    }
  }, 30000);
});
</script>

</body>
</html>